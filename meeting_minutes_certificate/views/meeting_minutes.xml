<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <record id="meeting_minutes_view_form" model="ir.ui.view">
        <field name="name">Meeting Minutes: add training certificate</field>
        <field name="model">meeting.minutes.project</field>
        <field name="inherit_id" ref="meeting_minutes_project.meeting_minutes_project_view_form"/>
        <field name="arch" type="xml">
            <header position="inside">
                <button name="preview_on_portal" type="object" string="Preview"/>
            </header>
            <field name="end_date" position="after">
                <field name="certificate_enabled"/>
            </field>
            <notebook position="inside">
                <page
                    name="certificate"
                    string="Training Certificate"
                    attrs="{'invisible': [('certificate_enabled', '=', False)]}"
                    >
                    <field name="signed_by_all" invisible="1"/>
                    <group>
                        <group>
                            <div class="oe_inline">
                                <button
                                    name="print_certificate"
                                    type="object"
                                    string="Print"
                                    attrs="{'invisible': [('signed_by_all', '=', False)]}"
                                    class="oe_highlight"
                                    style="margin-right: 16px;"
                                    />
                                <button
                                    name="send_certificate"
                                    attrs="{'invisible': [('signed_by_all', '=', False)]}"
                                    type="object"
                                    string="Resend Certificate"
                                    style="margin-right: 16px;"
                                    />
                                <button
                                    name="request_signatures"
                                    type="object"
                                    string="Request Signature"
                                    attrs="{'invisible': [('signed_by_all', '=', True)]}"
                                    class="oe_highlight"
                                    style="margin-right: 16px;"
                                    />
                            </div>
                        </group>
                        <group>
                            <field
                                name="certificate_report_id"
                                string="Aeroo Template"
                                context="{'default_model': 'meeting.minutes'}"
                                attrs="{'required': [('certificate_enabled', '=', True)]}"
                                />
                        </group>
                    </group>
                    <field name="signature_ids" attrs="{'readonly': [('signed_by_all', '=', True)]}">
                        <tree editable="bottom">
                            <field name="partner_id"
                                attrs="{'readonly': [('state', '!=', 'draft')]}"
                                force_save="1"
                                />
                            <field name="type_"/>
                            <field name="signature_datetime" string="Signature Date"/>
                            <field name="signature" widget="image"/>
                            <field name="state"/>
                            <button name="request_signature" type="object" string="Resend"
                                attrs="{'invisible': [('state', '!=', 'sent')]}"
                                />
                            <button name="get_formview_action" type="object" icon="fa-info"/>
                        </tree>
                    </field>
                </page>
            </notebook>
        </field>
    </record>

</odoo>
